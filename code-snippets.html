<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Code Snippets | Alex Hort-Francis | SCS Portfolio</title>

    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <meta name="description"
        content="Explore a collection of code snippets and technical solutions by Alex Hort-Francis. Discover insights into various programming challenges and techniques.">
    <meta name="keywords"
        content="Alex Hort-Francis, Code Snippets, Programming Techniques, Web Development, Solutions, Code Examples">

    <!-- Open Graph meta tags for social media previews -->
    <meta property="og:title" content="Code Snippets | Alex Hort-Francis">
    <meta property="og:description"
        content="Dive into a curated set of code snippets by Alex Hort-Francis, showcasing various programming techniques and solutions.">
    <meta property="og:image" content="images/profile-picture.jpeg">
    <meta property="og:url" content="https://alex-hort-francis.netmatters-scs.co.uk/code-snippets.html">
    <meta property="og:type" content="website">

    <link type="text/css" rel="stylesheet" href="css/application.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,400;0,600;0,800;1,400;1,600&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,400;0,600;1,600&display=swap"
        rel="stylesheet">
</head>

<body id="top">

    <!-- &apos;Burger' button to access primary navigation -->
    <button aria-hidden="true" class="primary-nav__menu-button">
        <svg viewBox="0 0 100 100" aria-hidden="true">
            <g class="primary-nav__menu-button-burger-lines">
                <line x1="20" y1="25" x2="80" y2="25" />
                <line x1="20" y1="50" x2="80" y2="50" />
                <line x1="20" y1="75" x2="80" y2="75" />
            </g>
            <g class="primary-nav__menu-button-cross-lines primary-nav__menu-button-cross-lines--hidden">
                <line x1="28" y1="28" x2="72" y2="72" />
                <line x1="28" y1="72" x2="72" y2="28" />
            </g>
        </svg>
    </button>

    <!-- Primary navigation -->
    <aside>
        <nav class="primary-nav primary-nav--hidden">

            <a href="index.html" class="primary-nav__logo"><span>A</span><span>HF</span></a>

            <div class="primary-nav__vertical-flex-container">

                <ul class="primary-nav__subpages-menu"> <!-- Primary navigation -->
                    <li><a href="about.html">About</a></li>
                    <li><a href="index.html#projects">Portfolio</a></li>
                    <li><a href="code-snippets.html">Code Snippets</a></li>
                    <li><a href="scs-scheme.html">SCS Scheme</a></li>
                    <li><a href="index.html#contact">Contact</a></li>
                </ul>

                <ul class="primary-nav__social-media-menu">
                    <li>
                        <a href="https://www.linkedin.com/in/hortfrancis" target="_blank" aria-label="LinkedIn"
                            class="primary-nav__social-media-link primary-nav__social-media-link--linkedin">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                focusable="false" role="img">
                                <title>LinkedIn</title>
                                <path
                                    d="M0 0v24h24v-24h-24zm8 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.397-2.586 7-2.777 7 2.476v6.759z" />
                            </svg>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/hortfrancis" target="_blank" aria-label="GitHub"
                            class="primary-nav__social-media-link primary-nav__social-media-link--github">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                focusable="false" role="img">
                                <title>GitHub</title>
                                <path
                                    d="M0 0v24h24v-24h-24zm14.534 19.59c-.406.078-.534-.171-.534-.384v-2.195c0-.747-.262-1.233-.55-1.481 1.782-.198 3.654-.875 3.654-3.947 0-.874-.311-1.588-.824-2.147.083-.202.357-1.016-.079-2.117 0 0-.671-.215-2.198.82-.639-.18-1.323-.267-2.003-.271-.68.003-1.364.091-2.003.269-1.528-1.035-2.2-.82-2.2-.82-.434 1.102-.16 1.915-.077 2.118-.512.56-.824 1.273-.824 2.147 0 3.064 1.867 3.751 3.645 3.954-.229.2-.436.552-.508 1.07-.457.204-1.614.557-2.328-.666 0 0-.423-.768-1.227-.825 0 0-.78-.01-.055.487 0 0 .525.246.889 1.17 0 0 .463 1.428 2.688.944v1.489c0 .211-.129.459-.528.385-3.18-1.057-5.472-4.056-5.472-7.59 0-4.419 3.582-8 8-8s8 3.581 8 8c0 3.533-2.289 6.531-5.466 7.59z" />
                            </svg>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.instagram.com/hortfrancis/" target="_blank" aria-label="Instagram"
                            class="primary-nav__social-media-link primary-nav__social-media-link--instagram">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                focusable="false" role="img">
                                <title>Instagram</title>
                                <path
                                    d="M14.667 12c0 1.473-1.194 2.667-2.667 2.667-1.473 0-2.667-1.193-2.667-2.667 0-1.473 1.194-2.667 2.667-2.667 1.473 0 2.667 1.194 2.667 2.667zm3.846-3.232c.038.843.046 1.096.046 3.232s-.008 2.389-.046 3.233c-.1 2.15-1.109 3.181-3.279 3.279-.844.038-1.097.047-3.234.047-2.136 0-2.39-.008-3.232-.046-2.174-.099-3.181-1.132-3.279-3.279-.039-.845-.048-1.098-.048-3.234s.009-2.389.047-3.232c.099-2.152 1.109-3.181 3.279-3.279.844-.039 1.097-.047 3.233-.047s2.39.008 3.233.046c2.168.099 3.18 1.128 3.28 3.28zm-2.405 3.232c0-2.269-1.84-4.108-4.108-4.108-2.269 0-4.108 1.839-4.108 4.108 0 2.269 1.84 4.108 4.108 4.108 2.269 0 4.108-1.839 4.108-4.108zm1.122-4.27c0-.53-.43-.96-.96-.96s-.96.43-.96.96.43.96.96.96c.531 0 .96-.43.96-.96zm6.77-7.73v24h-24v-24h24zm-4 12c0-2.172-.009-2.445-.048-3.298-.131-2.902-1.745-4.52-4.653-4.653-.854-.04-1.126-.049-3.299-.049s-2.444.009-3.298.048c-2.906.133-4.52 1.745-4.654 4.653-.039.854-.048 1.127-.048 3.299 0 2.173.009 2.445.048 3.298.134 2.906 1.746 4.521 4.654 4.654.854.039 1.125.048 3.298.048s2.445-.009 3.299-.048c2.902-.133 4.522-1.745 4.653-4.654.039-.853.048-1.125.048-3.298z" />
                            </svg>
                        </a>
                    </li>
                </ul>

            </div>

        </nav>
    </aside>

    <!-- Main page content -->
    <div class="layout-vertical-flex-container">
        <div class="subpage__layout-horizontal-container">
            <div class="subpage">

                <header>
                    <hgroup class="subpage__heading-group">
                        <h1>Code Snippets</h1>
                    </hgroup>
                </header>

                <main class="subpage__content--coding-snippets">

                    <section class="subpage__accordion-section">

                        <div class="subpage__accordion-section-heading-group">
                            <button class="subpage__accordion-section-open-close-button">
                                <svg class="icon">
                                    <use href="icons/symbol-defs.svg#icon-arrow-right"></use>
                                </svg>
                            </button>
                            <h2>Form Validation & Progressive Enhancement</h2>
                        </div>

                        <div class="subpage__accordion-section-content">

                            <p>For the &lsquo;Contact&rsquo; form on the homepage of this portfolio site, I chose to dig
                                deeply
                                into form validation techniques, using a combination of browser-native validation and
                                additional
                                JavaScript.</p>

                            <p>HTML5 provides the <a
                                    href="https://developer.mozilla.org/en-US/docs/Web/HTML/Constraint_validation"
                                    target="_blank">&lsquo;Constraint Validation API&rsquo;</a>, which specifies input
                                types
                                for
                                basic pre-built input validation, and further custom validation with the
                                &lsquo;pattern&rsquo;
                                attribute â€” via <a href="https://en.wikipedia.org/wiki/Regular_expression"
                                    target="_blank">&lsquo;regular expression&rsquo; (&lsquo;regex&rsquo;)</a>.</p>

                            <p>I used <a href="https://en.wikipedia.org/wiki/Progressive_enhancement"
                                    target="_blank">&lsquo;progressive enhancement&rsquo;</a> to ensure data validation
                                is
                                always provided on the frontend, even if JavaScript is not available in the user&rsquo;s
                                browser, but additional validation feedback is provided if JavaScript is available to
                                improve
                                the form&rsquo;s user experience (UX).</p>

                            <p>The form fields themselves use the <code>required</code> attribute, with regex provided
                                in
                                the
                                <code>pattern</code> attribute.
                            </p>

                            <p>This design pattern still supports optional form fields, as demonstrated by the phone
                                number
                                field.</p>

                            <pre class="code-html"><code>
&lt;div id="contact" class="contact-form"&gt;
    &lt;form id="contact-form" action="#"&gt;

        &lt;h2&gt;Get In Touch&lt;/h2&gt;
        &lt;div class="contact-form__validation-event-delegator"&gt;
            &lt;div class="contact-form__input-group"&gt;
                &lt;label for="contact-form-name"&gt;Name&lt;/label&gt;
                &lt;input type="text" id="contact-form-name" name="name" <b>required</b>
                    placeholder="What's your name?"&gt;
                &lt;span class="contact-form__error-indicator contact-form__error-indicator--hidden"&gt;Don't forget to leave your name&lt;/span&gt;
            &lt;/div&gt;

            &lt;div class="contact-form__input-group"&gt;
                &lt;label for="contact-form-email"&gt;Email&lt;/label&gt;
                &lt;input type="email" id="contact-form-email" name="email" <b>required
                    pattern="^[a-zA-Z0-9._\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,6}$"</b>
                    placeholder="What's your email address?"&gt;
                &lt;span class="contact-form__error-indicator contact-form__error-indicator--hidden"&gt;Don't forget to leave your correct email address&lt;/span&gt;
            &lt;/div&gt;

            &lt;div class="contact-form__input-group"&gt;
                &lt;label for="contact-form-phone"&gt;Phone &lt;i&gt;(optional)&lt;/i&gt;&lt;/label&gt;
                &lt;input type="tel" id="contact-form-phone" name="phone"
                    <b>pattern="(\+?\d{1,4}[\s\-]?)?(\(?[\d\s\-]{1,}?\)?[\s\-]?)?[\d\s\-]{5,15}"</b>
                    placeholder=" What's your phone number?"&gt;
                &lt;span class="contact-form__error-indicator contact-form__error-indicator--hidden"&gt;Your phone number seems miss-typed&lt;/span&gt;
            &lt;/div&gt;

            &lt;div class="contact-form__input-group"&gt;
                &lt;label for="contact-form-message"&gt;Message&lt;/label&gt;
                &lt;textarea id="contact-form-message" name="message" <b>required</b>
                    placeholder="What would you like to say?"&gt;&lt;/textarea&gt;
                &lt;span class="contact-form__error-indicator contact-form__error-indicator--hidden"&gt;Don't forget to leave a message&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="contact-form__input-group"&gt;
            &lt;button type="submit"&gt;Submit&lt;/button&gt;
        &lt;/div&gt;

    &lt;/form&gt; 
&lt;/div&gt;
</code></pre>

                            <p>In a linked JavaScript file, a combination of event listeners and utility functions
                                provide a
                                more comprehensive UX. We start by abstracting the actual logic of how to show & hide
                                the
                                &lsquo;error indicators&rsquo; underneath each form field (which is done using a class
                                with
                                <code>display: none</code>):
                            </p>

                            <pre class="code-javascript"><code>
/* Utility functions to handle updating 'strong' signified state of form fields */

function showErrorIndicator(inputField) {
    inputField.parentElement.querySelector('.contact-form__error-indicator').classList.remove('contact-form__error-indicator--hidden');
}

function hideErrorIndicator(inputField) {
    inputField.parentElement.querySelector('.contact-form__error-indicator').classList.add('contact-form__error-indicator--hidden');
}
                    </code></pre>

                            <p>I used two levels of feedback: <strong>&lsquo;hard&rsquo;</strong> and
                                <strong>&lsquo;soft&rsquo;</strong>. Soft is for inline, hard
                                is on a field-by-field basis. We do this because we want to give the user immediate
                                feedback
                                while they are typing about whether the data they are providing will be accepted, but we
                                understand that they haven&rsquo;t actually finished typing yet. When the user navigates
                                away
                                from the form field, we want to give them &lsquo;hard&rsquo; feedback so they can
                                correct
                                their
                                input as they go, instead of having to do it all when they try to submit the form. This
                                approach
                                attempts to maximise useful feedback to the user without distracting or overloading
                                them.
                            </p>

                            <p>I created utility classes to manage these &lsquo;hard&rsquo; feedback states, to abstract
                                the
                                inner workings:</p>

                            <pre class="code-javascript"><code>
// Signify value is definitely valid 
function indicateHardValid(inputField) {
    inputField.classList.add('contact-form__input-field--definitely-valid');
}

// Signify value needs changing before submission
function indicateHardInvalid(inputField) {
    inputField.classList.add('contact-form__input-field--needs-changing');
}

// Remove strong visual signifiers on the form field
function removeHardValidate(inputField) {
    inputField.classList.remove('contact-form__input-field--definitely-valid', 'contact-form__input-field--needs-changing', 'contact-form__input-field--presubmission-invalid');
    hideErrorIndicator(inputField);
}
                    </code></pre>

                            <p>Next we add event listeners to the form itself. There are lots of different ways to do
                                this,
                                but
                                for
                                this form I created a <code>&lt;div&gt;</code> element that is &lsquo;delegated&rsquo;
                                event
                                listeners for
                                multiple
                                form fields â€”
                                rather than creating a separate event listener for each field.</p>

                            <p>We want to use the in-built, native <code>Element.checkValidity()</code> method, which is
                                part of
                                the
                                &lsquo;Constraint Validation API&rsquo; mentioned earlier. This checks whether the value
                                of
                                a
                                field is
                                valid, using the default type validation and other additional parameters that we can set
                                as
                                attributes in the HTML â€” remember: we want our form to validate to a minimum baseline
                                even
                                without JavaScript.</p>

                            <pre class="code-javascript"><code>
/* Event listeners for additional validation */

// Grab the contact form
const contactForm = document.querySelector('form#contact-form');
// Grab the &lt;div&gt; that contains form fields but not the submit &lt;button&gt;
const eventDelegatorDiv = contactForm.querySelector('.contact-form__validation-event-delegator');

// Per-field validation bound to 'focusout' event on form fields
eventDelegatorDiv.addEventListener('focusout', event => {
    
    if (<b>event.target.checkValidity()</b>) {
        indicateHardValid(event.target);
        hideErrorIndicator(event.target);
    }
    // Don't need an Else clause here, 
    // because `event.target.checkValidity()` causes an 'invalid' event if false
});

// If the user returns to a form field 
eventDelegatorDiv.addEventListener('focusin', event => {
    
    // Remove strong visual signifiers on the form field
    removeHardValidate(event.target);
});
                    </code></pre>

                            <p>&lsquo;invalid&rsquo; events do not &lsquo;bubble&rsquo; up the DOM, so we need to switch
                                our
                                event listener to trigger
                                on the <a
                                    href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#event_capture"
                                    target="_blank">&lsquo;capture phase&rsquo;</a> instead.</p>



                            <pre class="code-javascript"><code>
// Overwrite the existing 'invalid' event with custom functionality
eventDelegatorDiv.addEventListener('invalid', event => {

    // Prevent the browser-native feedback bubbles from appearing
    event.preventDefault();

    // Signify invalid value needs changing
    indicateHardInvalid(event.target);
}, {
    <b>// Capture-phase event, not a bubble-phase event
    capture: true</b>
});
                    </code></pre>

                            <p>In order to make use of the form&rsquo;s &lsquo;submit&rsquo; event, we give the form a
                                &lsquo;<code>novalidate</code>&rsquo; attribute.
                                It&rsquo;s important we do this in our JavaScript instead of our HTML to fit with our
                                &lsquo;progressive
                                enhancement&rsquo; approach.</p>

                            <p>We can include additional &lsquo;pre-submission&rsquo; validation rules in this
                                &lsquo;submit&rsquo; event handler. Using &lsquo;submit&rsquo; on the form, instead of
                                &lsquo;click&rsquo; on the button, means pressing enter on a text input still triggers a
                                &lsquo;submit&rsquo; event. By using an If statement, bound to
                                <code>contactForm.checkValidity()</code>, we are essentially 'rebuilding' the original
                                browser-native constraint validation, but now we can customise it to our liking (or
                                business
                                logic).
                            </p>

                            <pre class="code-javascript"><code>
// Deactivate default pre-submission validation behaviour
// (Browser native validation will still occur if JavaScript is disabled)
contactForm.setAttribute('novalidate', true);

// Final pre-submission validation
contactForm.addEventListener('submit', event => {

    if (!contactForm.checkValidity()) {

        // Manually prevent the form from submitting
        event.preventDefault();
        
        contactForm.querySelectorAll(':invalid').forEach(invalidField => {
            // Add a red border around each invalid field
            invalidField.classList.add('contact-form__input-field--presubmission-invalid');
            // Show the error indicator underneath each invalid field
            showErrorIndicator(invalidField);
        });

        // Ensure focus goes to the first invalid form field
        const nextInvalidFieldToFillIn = contactForm.querySelectorAll(':invalid')[0];
        nextInvalidFieldToFillIn.focus();
        showErrorIndicator(nextInvalidFieldToFillIn);

    } else {
        // If validation passes, submit the form!
        contactForm.submit();
    }
});
                    </code></pre>

                            <p>In our SCSS, we can assign a variety of styling rules to handle &lsquo;live&rsquo;
                                validation.
                                I&rsquo;ve named
                                the modifier classes after what they are designed to signify in the mind of the user.
                            </p>

                            <pre class="code-scss"><code>
// Input is being used and value is not valid
input:not(:placeholder-shown):invalid,
textarea:not(:placeholder-shown):invalid {
    border-color: $soft-alert-orange;
}

// Input has been used and value is invalid
input:not(:placeholder-shown).contact-form__input-field--needs-changing,
textarea:not(:placeholder-shown).contact-form__input-field--needs-changing {
    border-color: $hard-alert-red;
}

// Input is being used
input:focus,
textarea:focus {
    outline: none;
    border-color: $feedback-yellow;
}

// Input is being used and input given will be valid 
input:not(:placeholder-shown):valid,
textarea:not(:placeholder-shown):valid {
    border-color: $soft-success-green;
}

input:not(:placeholder-shown).contact-form__input-field--definitely-valid,
textarea:not(:placeholder-shown).contact-form__input-field--definitely-valid {
    border-color: $hard-success-green;
}

// Input can't be submitted until the value is valid
input.contact-form__input-field--presubmission-invalid,
textarea.contact-form__input-field--presubmission-invalid {
    border-color: $hard-alert-red;
}
                    </code></pre>

                            <p>This approach attempts adding a modular, maintainable, but flexible and potentially very
                                sophisticated
                                set of UX features to the webform, while maintaining &lsquo;good-enough&rsquo; data
                                validation
                                even without
                                JavaScript!</p>

                        </div>

                    </section>

                </main>
            </div>
        </div>
        <footer class="footer">
            <a href="#top" class="footer__back-to-top-link">Back to top
                <svg class="icon">
                    <use href="icons/symbol-defs.svg#icon-chevron-up"></use>
                </svg>
            </a>
        </footer>
    </div>

    <!-- JavaScript script import -->
    <script src="js/navMenuToggle.js"></script>
    <script src="js/subpageAccordionSectionOpenClose.js"></script>
</body>

</html>